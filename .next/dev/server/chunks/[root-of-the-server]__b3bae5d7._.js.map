{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Trail-Sync/app/api/ai-guide/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { GoogleGenAI } from \"@google/genai\"\n\nconst ai = new GoogleGenAI({})\n\nasync function askGemini(prompt: string) {\n  const response = await ai.models.generateContent({\n    model: \"gemini-2.5-flash\",\n    contents: prompt,\n  })\n  return response.text\n}\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json()\n    const message = body.message?.toLowerCase() || \"\"\n\n    let response = \"\"\n\n    if (message.includes(\"safety\") || message.includes(\"safe\")) {\n      response = `Trail Safety Tips:\n\n- Always inform someone of your route and expected return time\n- Check weather forecasts before departure\n- Carry a first aid kit and know basic first aid\n- Stay on marked trails to avoid getting lost\n- Bring enough water and high-energy snacks\n- Download offline maps before heading out\n\nStay safe out there!`\n    } else if (message.includes(\"weather\") || message.includes(\"rain\") || message.includes(\"storm\")) {\n      response = `Weather Preparation:\n\n- Check forecasts 24 hours before departure\n- Pack rain gear and extra layers\n- Watch for dark clouds and sudden temperature drops\n- Seek shelter immediately if lightning is nearby\n- Start early to avoid afternoon thunderstorms\n- Have a backup plan if conditions worsen\n\nWeather can change quickly in mountains - always be prepared!`\n    } else if (message.includes(\"gear\") || message.includes(\"equipment\") || message.includes(\"pack\")) {\n      response = `Essential Gear Checklist:\n\n- Proper hiking boots with ankle support\n- Moisture-wicking clothing and layers\n- Navigation tools (map, compass, GPS)\n- Sun protection (hat, sunglasses, sunscreen)\n- Headlamp with extra batteries\n- Emergency shelter and fire starter\n- Sufficient food and water\n\nPack smart, hike comfortable!`\n    } else if (message.includes(\"water\") || message.includes(\"hydrat\")) {\n      response = `Hydration Tips:\n\n- Drink water regularly, not just when thirsty\n- Carry at least 2 liters for day hikes\n- Use water purification tablets or filters for natural sources\n- Avoid drinking untreated water from streams\n- Monitor urine color - light yellow means good hydration\n\nStaying hydrated is crucial for a safe trek!`\n    } else if (message.includes(\"rest\") || message.includes(\"break\") || message.includes(\"tired\")) {\n      response = `Rest & Recovery:\n\n- Take short breaks every 45-60 minutes\n- Find shaded spots with views for motivation\n- Stretch your legs during longer breaks\n- Have snacks to maintain energy levels\n- Listen to your body - rest when needed\n- Pace yourself to avoid exhaustion\n\nSmart rest = enjoyable journey!`\n    } else if (message.includes(\"wildlife\") || message.includes(\"animal\") || message.includes(\"bear\")) {\n      response = `Wildlife Awareness:\n\n- Make noise on trails to avoid surprising animals\n- Store food properly away from camp\n- Keep a safe distance - use zoom lenses for photos\n- Never feed wildlife\n- Know what to do if you encounter common animals\n- Carry bear spray in bear country\n\nRespect wildlife and their habitat!`\n    } else {\n      try {\n        response = await askGemini(\n          `You are a helpful trekking and travel guide. User question: ${body.message}. Provide clear, practical advice.`\n        )\n      } catch (error) {\n        response = `Trail Guide Tips:\n\nHere are some general hiking recommendations:\n\n- Plan your route and timing carefully\n- Check local regulations and permits\n- Follow Leave No Trace principles\n- Hike with a buddy when possible\n- Trust your instincts - turn back if needed\n\nFor specific advice about \"${body.message}\", I'm here to help with safety, gear, weather, hydration, and trail tips!\n\nWhat would you like to know more about?`\n      }\n    }\n\n    await new Promise((resolve) => setTimeout(resolve, 800))\n\n    return NextResponse.json({ response })\n  } catch (error) {\n    console.error(\"Guide error:\", error)\n    return NextResponse.json(\n      { response: \"I'm here to help with trail advice! Ask me about safety, gear, weather, or hiking tips.\" },\n      { status: 200 },\n    )\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,KAAK,IAAI,4KAAW,CAAC,CAAC;AAE5B,eAAe,UAAU,MAAc;IACrC,MAAM,WAAW,MAAM,GAAG,MAAM,CAAC,eAAe,CAAC;QAC/C,OAAO;QACP,UAAU;IACZ;IACA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,UAAU,KAAK,OAAO,EAAE,iBAAiB;QAE/C,IAAI,WAAW;QAEf,IAAI,QAAQ,QAAQ,CAAC,aAAa,QAAQ,QAAQ,CAAC,SAAS;YAC1D,WAAW,CAAC;;;;;;;;;oBASE,CAAC;QACjB,OAAO,IAAI,QAAQ,QAAQ,CAAC,cAAc,QAAQ,QAAQ,CAAC,WAAW,QAAQ,QAAQ,CAAC,UAAU;YAC/F,WAAW,CAAC;;;;;;;;;6DAS2C,CAAC;QAC1D,OAAO,IAAI,QAAQ,QAAQ,CAAC,WAAW,QAAQ,QAAQ,CAAC,gBAAgB,QAAQ,QAAQ,CAAC,SAAS;YAChG,WAAW,CAAC;;;;;;;;;;6BAUW,CAAC;QAC1B,OAAO,IAAI,QAAQ,QAAQ,CAAC,YAAY,QAAQ,QAAQ,CAAC,WAAW;YAClE,WAAW,CAAC;;;;;;;;4CAQ0B,CAAC;QACzC,OAAO,IAAI,QAAQ,QAAQ,CAAC,WAAW,QAAQ,QAAQ,CAAC,YAAY,QAAQ,QAAQ,CAAC,UAAU;YAC7F,WAAW,CAAC;;;;;;;;;+BASa,CAAC;QAC5B,OAAO,IAAI,QAAQ,QAAQ,CAAC,eAAe,QAAQ,QAAQ,CAAC,aAAa,QAAQ,QAAQ,CAAC,SAAS;YACjG,WAAW,CAAC;;;;;;;;;mCASiB,CAAC;QAChC,OAAO;YACL,IAAI;gBACF,WAAW,MAAM,UACf,CAAC,4DAA4D,EAAE,KAAK,OAAO,CAAC,kCAAkC,CAAC;YAEnH,EAAE,OAAO,OAAO;gBACd,WAAW,CAAC;;;;;;;;;;2BAUO,EAAE,KAAK,OAAO,CAAC;;uCAEH,CAAC;YAClC;QACF;QAEA,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;QAEnD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAS;IACtC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,UAAU;QAA0F,GACtG;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}